(this.webpackJsonpnotwitter=this.webpackJsonpnotwitter||[]).push([[0],{81:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(28),s=n.n(a),o=(n(81),n(21)),i=n(13),u=n(108),l=n(109),j=n(6),b=n(67),d=n.n(b),p="SIGN_UP",O="LOGIN",f="SIGN_OUT",h="GET_USER_DATA",m="GET_POSTS",x="ADD_POST",g="REMOVE_POST",v="NEW_POST_MOBILE_OPEN",w="NEW_POST_MOBILE_CLOSE",y="CURRENT_PAGE",S=n(3),N=function(){var e=Object(j.d)((function(e){return e.user.currentUser})),t=Object(j.d)((function(e){return e.global.currentPage})),n=Object(j.d)((function(e){return e.global.newPostIsOpen})),c=Object(j.c)(),a=Object(i.f)();return Object(S.jsx)("header",{className:"header",children:e?Object(S.jsxs)(r.a.Fragment,{children:[n?Object(S.jsx)(u.a,{onClick:function(){a.push("/notwitter"),c({type:y,payload:"Home"}),c({type:w})},children:Object(S.jsx)(d.a,{})}):Object(S.jsx)(l.a,{}),Object(S.jsx)("h3",{children:t})]}):Object(S.jsx)("h3",{children:"noTwitter"})})},P=n(11),I=n.n(P),_=n(19),D=function(e){var t=e.icon,n=e.title,c=e.path,r=e.isActive,a=e.func;return Object(S.jsx)("li",{className:"linkItem ".concat(r?"linkItem--isActive":""),onClick:a,children:Object(S.jsxs)(o.b,{to:c,children:[t," ",Object(S.jsx)("p",{children:n})]})})},E=n(68),U=n.n(E),T=n(69),k=n.n(T),A=n(70),L=n.n(A),C=n(39),z=(n(91),n(92),C.a.initializeApp({apiKey:"AIzaSyB_LzO_cPoxv5uXPUx_VdVsHKM9WbTn0lo",authDomain:"notwitter-b1e9c.firebaseapp.com",projectId:"notwitter-b1e9c",storageBucket:"notwitter-b1e9c.appspot.com",messagingSenderId:"769546520504",appId:"1:769546520504:web:7802f06a5bb9745111314d",measurementId:"G-L3ZWLM4FNL"}));C.a.analytics();var J=C.a.auth(),F=C.a.firestore(z),M=C.a,q=function(){var e=Object(j.d)((function(e){return e.user.user})),t=Object(j.d)((function(e){return e.global.currentPage})),n=Object(j.c)();return e?Object(S.jsx)("header",{className:"menu",children:Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{children:[Object(S.jsx)(D,{path:"/notwitter",title:"Home",icon:Object(S.jsx)(U.a,{fontSize:"large"}),isActive:"Home"===t,func:function(){return n({type:y,payload:"Home"})}}),Object(S.jsx)(D,{path:"/notwitter/profile",title:"Profile",icon:Object(S.jsx)(k.a,{fontSize:"large"}),isActive:"Profile"===t,func:function(){return n({type:y,payload:"Profile"})}}),Object(S.jsx)(D,{path:"/notwitter",title:"Log Out",func:Object(_.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.signOut().then((function(){localStorage.removeItem("notwitterUser"),localStorage.removeItem("notwitterCurrentUser"),n({type:f}),console.log("Signed out.")})).catch((function(e){console.log(e.code),console.log(e.message)}));case 2:case"end":return e.stop()}}),e)}))),icon:Object(S.jsx)(L.a,{fontSize:"large"})})]})})}):null},W=function(){return Object(j.d)((function(e){return e.user.currentUser}))?Object(S.jsx)("aside",{className:"news"}):null},B=n(71),G=n.n(B),H=function(){var e=Object(j.c)();return Object(S.jsx)(o.b,{className:"newPostMobile",to:"/notwitter/newpost",onClick:function(){e({type:y,payload:"New Post"}),e({type:v})},children:Object(S.jsx)(G.a,{fontSize:"large"})})},$=n(15),R=function(e){var t=e.title,n=e.type,c=e.cls;return Object(S.jsx)("button",{type:n,className:"btn ".concat(c||""),children:t})},V=function(e){var t=e.name,n=e.type,c=e.value,r=e.func,a=e.ph,s=e.required,o=e.err;return Object(S.jsxs)("div",{className:"input",children:[Object(S.jsxs)("label",{htmlFor:t,children:[t,s?"*":""]}),Object(S.jsx)("input",{className:o?"input--err":"",type:n,value:c,onChange:r,name:t,placeholder:a})]})},K=function(){var e=Object(c.useState)(""),t=Object($.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object($.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(!1),b=Object($.a)(u,2),d=b[0],p=b[1],O=Object(c.useState)(!1),f=Object($.a)(O,2),h=f[0],m=f[1],g=Object(j.c)(),v=Object(j.d)((function(e){return e.global.newPostIsOpen})),w=Object(j.d)((function(e){return e.user.user})),y=Object(j.d)((function(e){return e.user.currentUser})),N=function(){var e=Object(_.a)(I.a.mark((function e(t){var c,a,s,u,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=function(){return Math.floor(1e9*Math.random())}().toString(),a=(new Date).toString(),s=!o||/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/g.test(o),u=n.length>0,m(!1===s),p(!u),l={currentUser:y.displayName,id:c,user:w,content:n,date:a,image:o},e.next=11,F.collection("users").doc(w).update({posts:M.firestore.FieldValue.arrayUnion(c)});case 11:if(!s||!u){e.next=14;break}return e.next=14,F.collection("posts").doc(c).set(l).then((function(){g({type:x,payload:l}),r(""),i("")})).catch((function(e){console.log(e.code),console.log(e.message)}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"newPost ".concat(v?"newPost--isOpen":""),children:[Object(S.jsx)(l.a,{}),Object(S.jsxs)("form",{onSubmit:N,children:[Object(S.jsx)("textarea",{placeholder:"What's happening?",cols:"30",rows:"7",value:n,onChange:function(e){r(e.target.value)},required:!d,maxLength:"255"}),Object(S.jsx)(V,{type:"text",name:"Image url",ph:"https://example.com/images/uploads/94302/",value:o,err:!!h,func:function(e){i(e.target.value)}}),Object(S.jsx)(R,{type:"submit",title:"Post"})]})]})},X=n(72),Z=n.n(X),Q=function(e){var t=e.post,n=Object(j.d)((function(e){return e.user.currentUser})),r=Object(c.useState)(null),a=Object($.a)(r,2),s=a[0],o=a[1],i=Object(j.c)(),b=t.currentUser,d=t.date,p=t.content,O=t.id,f=t.image,h=JSON.parse(localStorage.getItem("notwitterCurrentUser"));return Object(c.useEffect)((function(){h&&o(h.posts.includes(O))}),[O,h,n]),console.log(s),Object(S.jsxs)("article",{className:"post",children:[Object(S.jsx)("aside",{className:"post__avatar",children:Object(S.jsx)(l.a,{})}),Object(S.jsxs)("div",{className:"post__body",children:[Object(S.jsxs)("header",{className:"post__header",children:[Object(S.jsx)("h4",{className:"post__author",children:b}),Object(S.jsx)("p",{className:"post__date",children:new Date(d).toLocaleDateString()}),s?Object(S.jsx)(u.a,{onClick:Object(_.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.collection("posts").doc(O).delete().then(Object(_.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.collection("users").doc(h.uid).update({posts:M.firestore.FieldValue.arrayRemove(O)});case 2:i({type:g,payload:O});case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),children:Object(S.jsx)(Z.a,{})}):""]}),Object(S.jsx)("p",{children:p}),Object(S.jsx)("img",{src:f,alt:f})]})]})},Y=function(){var e=Object(j.d)((function(e){return e.posts.posts}))||JSON.parse(localStorage.getItem("notwitterPosts"));return Object(S.jsx)("ul",{className:"postsList",children:e.length>0?e.sort((function(e,t){var n=new Date(e.date);return new Date(t.date)-n})).map((function(e){return Object(S.jsx)(Q,{post:e},e.id)})):Object(S.jsx)("p",{className:"postsList__noPosts",children:"No posts."})})},ee=function(){return Object(S.jsxs)("div",{className:"home",children:[Object(S.jsx)(K,{}),Object(S.jsx)(Y,{})]})},te=function(){var e=Object(j.c)(),t=Object(c.useState)("Already registered?"),n=Object($.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),i=Object($.a)(s,2),u=i[0],l=i[1],b=Object(c.useState)(""),d=Object($.a)(b,2),p=d[0],f=d[1],h=function(e){var t=e.target,n=t.name,c=t.value;"Email"===n&&l(c),"Password"===n&&f(c)},m=function(){var t=Object(_.a)(I.a.mark((function t(n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,J.signInWithEmailAndPassword(u,p).then((function(t){e({type:O,payload:t.user.uid}),localStorage.setItem("notwitterUser",JSON.stringify(t.user.uid)),l(""),f("")})).catch((function(e){a(e.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){setTimeout((function(){a("Already registered?")}),3e3)}),[r]),Object(S.jsx)("div",{className:"form login",children:Object(S.jsxs)("form",{onSubmit:function(e){return m(e)},children:[Object(S.jsx)("p",{children:r}),Object(S.jsx)(V,{name:"Email",type:"text",value:u,func:function(e){return h(e)}}),Object(S.jsx)(V,{name:"Password",type:"password",value:p,func:function(e){return h(e)}}),Object(S.jsx)(o.b,{to:"/notwitter/signup",children:"Don't have an account?"}),Object(S.jsx)(R,{title:"Log In",type:"submit",cls:"formBtn"})]})})},ne=function(){var e=Object(j.d)((function(e){return e.user.user}));return Object(S.jsx)("section",{className:"page main",children:e?Object(S.jsx)(ee,{}):Object(S.jsx)(te,{})})},ce=function(){var e=Object(i.f)(),t=Object(j.c)(),n=Object(c.useState)("Provide your details."),r=Object($.a)(n,2),a=r[0],s=r[1],u=Object(c.useState)(""),l=Object($.a)(u,2),b=l[0],d=l[1],O=Object(c.useState)(""),f=Object($.a)(O,2),h=f[0],m=f[1],x=Object(c.useState)(""),g=Object($.a)(x,2),v=g[0],w=g[1],y=Object(c.useState)(""),N=Object($.a)(y,2),P=N[0],D=N[1],E=Object(c.useState)(""),U=Object($.a)(E,2),T=U[0],k=U[1],A=Object(c.useState)(""),L=Object($.a)(A,2),C=L[0],z=L[1];Object(c.useEffect)((function(){setTimeout((function(){s("Provide your details.")}),3e3)}),[a]);var M=function(e){var t=e.target,n=t.name,c=t.value;"Full name"===n&&d(c),"Display name"===n&&m(c),"Date of birth"===n&&w(c),"Email"===n&&D(c),"Password"===n&&k(c),"Confirm password"===n&&z(c)},q=function(){var n=Object(_.a)(I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,J.createUserWithEmailAndPassword(P,T).then((function(n){var c=n.user.uid;console.log(c),F.collection("users").doc(c).set({fullName:b,displayName:h,dob:v,email:P,uid:c,createdAt:(new Date).toLocaleDateString()}),t({type:p,payload:c}),localStorage.setItem("notwitterUser",JSON.stringify(c)),d(""),m(""),w(""),D(""),k(""),z(""),e.push("/notwitter")})).catch((function(e){s(e.message),console.log(e.code),console.log(e.message)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(S.jsx)("section",{className:"page main",children:Object(S.jsx)("div",{className:"form signup",children:Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){if(b.length<=6)s("Full name should be at least 6 characters.");else if(/^[a-z\s]+$/i.test(b))if(h.length<3)s("Display name should be at least 3 characters.");else if(v.length<8)s("Date of birth should contain 8 numbers.");else if(/^[0-9]+$/.test(v))if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P))if(T!==C)s("Passwords not match.");else{if(!(T.length<6||C<6))return q();s("Password should contain at least 6 characters.")}else s("Invalid email.");else s("Date of birth should contain only numbers.");else s("Full name should contain only a letters.")}()},children:[Object(S.jsx)("p",{children:a}),Object(S.jsx)(V,{name:"Full name",type:"text",ph:"Joe Doe",value:b,func:function(e){return M(e)},required:!0,err:/^[a-z\s]+$/i.test(b)&&b.length>3}),Object(S.jsx)(V,{name:"Display name",type:"text",ph:"min 3 char",value:h,func:function(e){return M(e)},required:!0,err:h.length>=3}),Object(S.jsx)(V,{name:"Date of birth",type:"number",ph:"ddmmyyyy",value:v,func:function(e){return M(e)},required:!0,err:/^[0-9]+$/.test(v)&&8===v.length}),Object(S.jsx)(V,{name:"Email",type:"text",ph:"example@gmail.com",value:P,func:function(e){return M(e)},required:!0,err:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P)}),Object(S.jsx)(V,{name:"Password",type:"password",ph:"min 6 char",value:T,func:function(e){return M(e)},required:!0,err:T.length>=6&&T===C}),Object(S.jsx)(V,{name:"Confirm password",type:"password",ph:"min 6 char",value:C,func:function(e){return M(e)},required:!0,err:C.length>=6&&T===C}),Object(S.jsx)(o.b,{to:"/notwitter",children:"Already have an account?"}),Object(S.jsx)(R,{title:"Sign Up",type:"submit",cls:"formBtn"})]})})})},re=function(){var e=JSON.parse(localStorage.getItem("notwitterCurrentUser")),t=e.fullName,n=e.displayName,c=e.dob,r=e.email,a=e.createdAt;return Object(S.jsx)("section",{className:"page profile",children:Object(S.jsxs)("div",{className:"profile__inner",children:[Object(S.jsxs)("h3",{children:["Hello ",Object(S.jsx)("span",{children:n})]}),Object(S.jsxs)("ul",{children:[Object(S.jsxs)("li",{children:[Object(S.jsx)("span",{children:"Full name:"}),Object(S.jsx)("span",{children:t})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("span",{children:"Display name:"}),Object(S.jsx)("span",{children:n})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("span",{children:"Email:"}),Object(S.jsx)("span",{children:r})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("span",{children:"Date of birth:"}),Object(S.jsx)("span",{children:c})]}),Object(S.jsxs)("li",{children:[Object(S.jsx)("span",{children:"Joined at:"}),Object(S.jsx)("span",{children:a})]})]})]})})},ae=function(){return Object(S.jsx)("section",{className:"newPostPage",children:Object(S.jsx)(K,{})})};var se=Object(j.b)(null,{getUserData:function(){return function(){var e=Object(_.a)(I.a.mark((function e(t,n){var c,r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n(),r=c.user,a=F.collection("users").doc(r.user),e.next=4,a.get().then((function(e){e.data()?(t({type:h,payload:e.data()}),localStorage.setItem("notwitterCurrentUser",JSON.stringify(e.data()))):console.log("No such document.")})).catch((function(e){console.log(e.code),console.log(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},getPosts:function(){return function(){var e=Object(_.a)(I.a.mark((function e(t,n){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=F.collection("posts"),e.next=3,c.get().then((function(e){e.forEach((function(e){if(e.data())return t({type:m,payload:e.data()}),e.data();console.log("No such document.")}))})).then((function(){var e=n().posts;localStorage.setItem("notwitterPosts",JSON.stringify(e.posts))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(e){var t=e.getUserData,n=e.getPosts,r=Object(j.d)((function(e){return e.user.user})),a=localStorage.getItem("notwitterUser"),s=Object(j.c)();return Object(c.useEffect)((function(){a&&s({type:O,payload:JSON.parse(a)})}),[r,s,a]),Object(c.useEffect)((function(){r&&t()}),[t,r]),Object(c.useEffect)((function(){n()}),[n]),Object(S.jsxs)("div",{className:"app",children:[Object(S.jsx)(q,{}),Object(S.jsxs)("main",{className:"container",children:[Object(S.jsx)(N,{}),Object(S.jsxs)(i.c,{children:[Object(S.jsx)(i.a,{exact:!0,path:"/noTwitter",component:ne}),Object(S.jsx)(i.a,{path:"/noTwitter/signup",component:ce}),Object(S.jsx)(i.a,{path:"/noTwitter/newpost",component:ae}),Object(S.jsx)(i.a,{path:"/noTwitter/profile",component:re})]})]}),r?Object(S.jsx)(H,{}):null,Object(S.jsx)(W,{})]})})),oe=n(29),ie=n(73),ue=n(74),le=n(12),je={currentPage:"Home",newPostIsOpen:!1},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(le.a)(Object(le.a)({},e),{},{currentPage:t.payload});case v:return Object(le.a)(Object(le.a)({},e),{},{newPostIsOpen:!0});case w:return Object(le.a)(Object(le.a)({},e),{},{newPostIsOpen:!1});default:return e}},de={user:null,currentUser:null},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:case O:return Object(le.a)(Object(le.a)({},e),{},{user:t.payload});case f:return Object(le.a)(Object(le.a)({},e),{},{user:null,currentUser:null});case h:return Object(le.a)(Object(le.a)({},e),{},{currentUser:t.payload});default:return e}},Oe=n(54),fe={posts:[]},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(le.a)(Object(le.a)({},e),{},{posts:[].concat(Object(Oe.a)(e.posts),[t.payload])});case g:return Object(le.a)(Object(le.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload}))});case m:return Object(le.a)(Object(le.a)({},e),{},{posts:[].concat(Object(Oe.a)(e.posts),[t.payload])});default:return e}},me=Object(oe.combineReducers)({user:pe,global:be,posts:he}),xe=[ie.a],ge=Object(oe.createStore)(me,Object(ue.composeWithDevTools)(oe.applyMiddleware.apply(void 0,xe)));s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(j.a,{store:ge,children:Object(S.jsx)(o.a,{children:Object(S.jsx)(se,{})})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.c9b0efe6.chunk.js.map